RewriteEngine On

# 1. Externally redirect any request for a .html file to the clean URL
# This rule only runs if the original browser request contained ".html"
RewriteCond %{THE_REQUEST} \s/+(.+?)\.html[\s?] [NC]
RewriteRule ^ /%1 [R=301,L,NE]

# 2. Internally rewrite the clean URL to the actual .html file path
# This rule only runs if a file or directory with that name doesn't already exist
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([^/.]+)$ $1.html [L]